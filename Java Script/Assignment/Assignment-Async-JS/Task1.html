<!DOCTYPE html>
<html>
<head>
    <title>Fetch Users</title>

    <style>
        #loader {
            display: none;
            font-weight: bold;
        }

        table {
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 8px 15px;
            border: 1px solid #333;
        }
    </style>
</head>
<body>

    <h2>User List</h2>

    <button id="refreshBtn">Refresh</button>
    <span id="loader">Loading...</span>

    <table id="userTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>City</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <script>
        let tableBody = document.getElementById("tableBody");
        let loader = document.getElementById("loader");
        let refreshBtn = document.getElementById("refreshBtn");

        async function loadUsers() {
            try {
                loader.style.display = "inline";

                let response = await fetch("https://jsonplaceholder.typicode.com/users");
                let users = await response.json();

                tableBody.innerHTML = "";

                users.forEach(function(user) {
                    let tr = document.createElement("tr");

                    tr.innerHTML = `
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>${user.address.city}</td>
                    `;

                    tableBody.appendChild(tr);
                });

            } catch (err) {
                console.log("Error fetching data:", err);
            } finally {
                loader.style.display = "none";
            }
        }

        refreshBtn.onclick = function() {
            loadUsers();
        };

        loadUsers();
    </script>

</body>
</html>
